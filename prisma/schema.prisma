generator client {
provider = "prisma-client-js"
}


datasource db {
provider = "postgresql"
url = env("DATABASE_URL")
}


model User {
id String @id @default(cuid())
email String @unique
name String?
password String // bcrypt hashed
role String @default("user")
createdAt DateTime @default(now())
}


model Credential {
id String @id @default(cuid())
provider String // "modmed" | "athena"
practiceId String? // relevant practice id or firm prefix
encrypted String // encrypted blob (JSON string encrypted)
createdAt DateTime @default(now())
}


model AuditLog {
id String @id @default(cuid())
userId String?
action String
details String?
createdAt DateTime @default(now())
}


model PatientCache {
id String @id @default(cuid())
patientId String @unique
body Json
updatedAt DateTime @updatedAt
}